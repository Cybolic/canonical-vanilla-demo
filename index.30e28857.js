const e={id:0,link:"",name:"Unknown"},t=(e,t,n)=>{const a=n._embedded["wp:term"].find((e=>e.length&&e[0].taxonomy===t))?.find((t=>t.id===e));return a},n=async()=>{const n=await fetch("https://people.canonical.com/~anthonydillon/wp-json/wp/v2/posts.json");return(await n.json()).map((n=>(n=>{const a=n._embedded.author.find((e=>e.id===n.author))??e,o=t(n.categories[0],"category",n),r=t(n.topic[0],"topic",n);return{author:{id:n.author,link:a.link,name:a.name},date:new Date(n.date),excerpt:n.excerpt.rendered,link:n.link,mainCategory:o,mainTopic:r,thumbnail:n.featured_media,title:n.title.rendered}})(n))).sort(((e,t)=>{const n=t.date.getTime()-e.date.getTime();return 0===n?t.title.localeCompare(e.title):n}))},a=(e,t,n)=>{if(null===e)return document.createTextNode(t.text||"");const o=[],r=document.createElement(e);if(void 0!==t.text&&(r.textContent=t.text,delete t.text),void 0!==t.children){for(const e of t.children){let t;if(e instanceof HTMLElement||e instanceof Text)t=e;else{if(!Array.isArray(e)){console.warn("Invalid child. Ignored:",e);continue}{const[n,o]=e;t=a(n,o)}}o.push(t)}for(const e of o)r.appendChild(e);delete t.children}for(const[e,n]of Object.entries(t))r[e]=n;return void 0!==n&&n.appendChild(r),r},o=(e,t)=>{const n=new Intl.DateTimeFormat("en",{year:"numeric"}).format(e),a=new Intl.DateTimeFormat("en",{month:"long"}).format(e),o=new Intl.DateTimeFormat("en",{day:"numeric"}).format(e);return t.replace("%Y",n).replace("%B",a).replace("%d",o)},r=(e,t)=>a("a",{children:[["img",{className:"card__image p-card__image u-no-padding",src:e}]],className:"card__image-wrapper p-card__inner u-no-padding--top u-no-padding--bottom",href:t}),i=(e,t)=>a("h2",{children:[["a",{href:t,text:e}]],className:"card__title p-card__inner p-heading--4 u-no-margin--bottom u-no-padding--top u-no-padding--bottom"}),d=(e,t,n)=>a("address",{children:[[null,{text:"By "}],["a",{href:t,text:e}],[null,{text:" on "}],["time",{datetime:n.toISOString(),text:o(n,"%d %B %Y")}]],className:"card__author p-card__inner u-no-margin--bottom p-text--small"}),c=({link:e,date:t,title:n,thumbnail:o,authorName:c,authorLink:l})=>a("p",{children:[r(o,e),i(n,e),d(c,l,t)],className:"card__content p-card__content"});document.addEventListener("DOMContentLoaded",(async()=>{const e=document.querySelector("#posts"),t=await n();for(const n of t)e?.appendChild((r=void 0,i=void 0,a("section",{children:[(i=(o=n).mainTopic?.name??"Cloud and Server",a("header",{className:"card__header p-card__inner u-no-margin p-text--x-small-capitalised u-text--muted",text:i})),c({authorLink:o.author.link,authorName:o.author.name,date:o.date,link:o.link,thumbnail:o.thumbnail,title:o.title}),(r="Articles"===o.mainCategory?.name?"Article":"Post",a("footer",{className:"card__footer p-card__inner u-no-padding--bottom p-text--small",text:r}))],className:"card col-4 p-card u-no-padding"})));var o,r,i}));
//# sourceMappingURL=index.30e28857.js.map
